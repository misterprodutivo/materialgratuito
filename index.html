<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Materiais gratuitos | Omni IA</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="logo.png" />
    <meta name="description"
        content="Automatize seu negÃ³cio com inteligÃªncia artificial. Agentes, fluxos e soluÃ§Ãµes com IA sob medida para empresas.">
</head>

<body>
    <section class="hero">
        <div class="container">
            <h2>Domine o mercado de IA e escale sua AgÃªncia para R$ 10k/mÃªs</h2>
            <p>Tenha acesso ao Protocolo 10K com IA + Templates de n8n gratuitos + grupo de Networking</p>

            <div class="modal-content">
                <h4>Cadastre-se para acessar o material e o grupo de networking ðŸ‘‡</h4>
                <form id="whatsapp-form">
                    <input type="text" id="nome" placeholder="Seu nome" required />

                    <input type="email" id="email" placeholder="Seu melhor e-mail" required />
                    <input type="tel" id="telefone" placeholder="Seu WhatsApp (com DDD)" required maxlength="15" />

                    <button type="submit" id="submit-btn" class="btn">Quero os templates + Protocolo</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2026 Omni IA. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // 3. MÃSCARA DE TELEFONE: Melhora a experiÃªncia do usuÃ¡rio (UX)
        const telInput = document.getElementById("telefone");
        telInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, "");
            value = value.replace(/^(\22)(\d)/g, "($1) $2"); // Ajuste para DDD 2 dÃ­gitos
            if (value.length > 2) value = "(" + value.substring(0, 2) + ") " + value.substring(2);
            if (value.length > 9) value = value.substring(0, 10) + "-" + value.substring(10);
            e.target.value = value;
        });

        document.getElementById("whatsapp-form").addEventListener("submit", async function (e) {
            e.preventDefault();

            const submitBtn = document.getElementById("submit-btn");
            const nome = document.getElementById("nome").value.trim();
            const email = document.getElementById("email").value.trim();
            const telefone = telInput.value.replace(/\D/g, "");

            // 3. FEEDBACK DE ENVIO: Evita cliques duplos e informa o usuÃ¡rio
            submitBtn.disabled = true;
            submitBtn.innerHTML = "Enviando acesso...";
            submitBtn.style.opacity = "0.7";

            try {
                const response = await fetch("https://n8n.johnvic.shop/webhook/leadmagnet", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        nome: nome,
                        telefone: telefone,
                        email: email,
                        origem: "Pagina de Captura"
                    })
                });

                if (response.ok) {
                    // Redireciona para o grupo do WhatsApp
                    window.location.href = "https://cosmic-hill-e5f.notion.site/Ag-ncia-de-IA-2026-o-Protocolo-de-R-10k-m-s-2e1c30ca3ce48047b6eed63a9fbc32af";
                } else {
                    throw new Error("Erro no servidor");
                }
            } catch (error) {
                console.error("Erro ao enviar para o webhook:", error);
                alert("Ocorreu um erro. Verifique sua conexÃ£o e tente novamente.");

                // Restaura o botÃ£o em caso de erro
                submitBtn.disabled = false;
                submitBtn.innerHTML = "Quero os templates + Protocolo";
                submitBtn.style.opacity = "1";
            }
        });
    </script>
</body>

</html>